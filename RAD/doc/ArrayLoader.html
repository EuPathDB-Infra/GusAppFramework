<HTML>
<HEAD>
<TITLE>GUS::RAD::Plugin::ArrayLoader.pm</TITLE>
<LINK REV="made" HREF="mailto:bhcompile@porky.devel.redhat.com">
</HEAD>

<BODY>

<A NAME="__index__"></A>
<!-- INDEX BEGIN -->

<UL>

	<LI><A HREF="#name">NAME</A></LI>
	<LI><A HREF="#synopsis">SYNOPSIS</A></LI>
	<LI><A HREF="#description">DESCRIPTION</A></LI>
	<LI><A HREF="#arguments">ARGUMENTS</A></LI>
	<LI><A HREF="#options">OPTIONS</A></LI>
	<LI><A HREF="#notes">NOTES</A></LI>
	<UL>

		<LI><A HREF="#cfg_file"><EM>cfg_file</EM></A></LI>
		<LI><A HREF="#data_file"><EM>data_file</EM></A></LI>
		<LI><A HREF="#restart"><EM>restart</EM></A></LI>
		<LI><A HREF="#testnumber"><EM>testnumber</EM></A></LI>
	</UL>

	<LI><A HREF="#author">AUTHOR</A></LI>
	<LI><A HREF="#copyright">COPYRIGHT</A></LI>
</UL>
<!-- INDEX END -->

<HR>
<P>
<H1><A NAME="name">NAME</A></H1>
<P>GUS::RAD::Plugin::ArrayLoader</P>
<P>
<HR>
<H1><A NAME="synopsis">SYNOPSIS</A></H1>
<P>ga GUS::RAD::Plugin:ArrayLoader <STRONG>[options]</STRONG> <STRONG>--cfg_file</STRONG> cfg_file <STRONG>--data_file</STRONG> data_file</P>
<P>ga GUS::RAD::Plugin::ArrayLoader <STRONG>[options]</STRONG> <STRONG>--help</STRONG></P>
<P>ga GUS::RAD::Plugin::ArrayLoader <STRONG>[options]</STRONG> <STRONG>--cfg_file</STRONG> cfg_file <STRONG>--data_file</STRONG> data_file <STRONG>--manufacturer_id</STRONG> manufacturer_id <STRONG>--platform_type_id</STRONG> platform_type_id <STRONG>--substrate_type_id</STRONG> substrate_type_id <STRONG>--debug</STRONG> &gt; logfile</P>
<P>ga GUS::RAD::Plugin::ArrayLoader <STRONG>[options]</STRONG> <STRONG>--cfg_file</STRONG> cfg_file <STRONG>--data_file</STRONG> data_file <STRONG>--manufacturer_id</STRONG> manufacturer_id <STRONG>--platform_type_id</STRONG>  platform_type_id <STRONG>--substrate_type_id</STRONG> substrate_type_id <STRONG>--commit</STRONG> &gt; logfile</P>
<P>
<HR>
<H1><A NAME="description">DESCRIPTION</A></H1>
<PRE>
    This is a plug-in that loads array data (spotted microarray and oligonucleotide array) into Array, Control, ArrayAnnotation, CompositeElementAnnotaion, ElementAnnotation tables and views of CompositeElementImp, ElementImp.</PRE>
<P>
<HR>
<H1><A NAME="arguments">ARGUMENTS</A></H1>
<P><STRONG>--cfg_file</STRONG> <EM>config_file</EM> [require the absolute pathname]
</P>
<PRE>

    This file tells the plug-in how to map table/view attributes to columns in the data file and gives the values for attributes in Array, ArrayAnnotation.</PRE>
<P><STRONG>--data_file</STRONG> <EM>data_file</EM>  [require the absolute pathname]</P>
<PRE>
    The file contains the values for attributes in ElementImp, CompositeElementImp, ElementAnnotation and CompositeElementAnnotation.</PRE>
<P><STRONG>--manufacturer_id</STRONG> <EM>manufacturer_id</EM>  [require must be one of contact_id in SRes:Contact table]</P>
<PRE>
    set value for the Array.manufacturer_id</PRE>
<P><STRONG>--platform_type_id</STRONG> <EM>platform_type_id</EM>  [require must be one of ontology_entry_id in RAD3::OntologyEntry table]</P>
<PRE>
    set value for the Array.platform_type_id</PRE>
<P><STRONG>--substrate_type_id</STRONG> <EM>substrate_type_id</EM>  [require must be one of ontology_entry_id in RAD3::OntologyEntry table]</P>
<PRE>
    set value for the Array.substrate_type_id</PRE>
<P>
<HR>
<H1><A NAME="options">OPTIONS</A></H1>
<P><STRONG>--debug</STRONG>
    Debugging output.</P>
<P><STRONG>--help</STRONG>
    Get usage; same as usage.</P>
<P><STRONG>--verbose</STRONG>
    Lots of output.</P>
<P><STRONG>--commit</STRONG>   
    Commit the data to database.</P>
<P><STRONG>--testnumber</STRONG> <EM>NUM</EM>   
    Number of iterations for testing (<STRONG>in non-commit mode only</STRONG>).</P>
<P><STRONG>--protocol_id</STRONG> <EM>NUM</EM>   
    Must be one of protocol_ids in RAD3.protocol table(<STRONG>set value for the Array.protocol</STRONG>).</P>
<P><STRONG>--restart</STRONG> <EM>NUM</EM>   
    data file line number to start loading data from (start counting after the header)</P>
<P><STRONG>--user</STRONG> <EM>STRING</EM>
    The user name, used to set value for row_user_id. The user must already be in Core::UserInfo table. [Default: from $HOME/.gus.properties file]</P>
<P><STRONG>--group</STRONG> <EM>STRING</EM>
    The group name, used to set value for row_group_id. The group must already be in Core::GroupInfo table. [Default: from $HOME/.gus.properties file]</P>
<P><STRONG>--project</STRONG> <EM>STRING</EM>
    The project name, used to set value for row_project_id. The project must already be in Core::ProjectInfo table. [Default: from $HOME/.gus.properties file]</P>
<P>
<HR>
<H1><A NAME="notes">NOTES</A></H1>
<P>Before you can run this plug-in you need to create the Perl objects for the views you will be loading, should these objects not exist yet. Based on the ``build'' system, this will involve two steps. First, check out the RAD, CBIL, GUS and Install modules from the cvs repository; secondly, build the GUS_HOME which the Perl objects reside in.</P>
<P>The plug-in outputs a print statement to STDOUT (for possible redirection to a log file) which lists the number of data file lines read (counting empty lines, but not counting the header and the lines preceding it in the data file) and any warning <CODE>statement(s)</CODE> regarding data lines which have not been loaded into RAD3.</P>
<P>Make sure that the <EM>.gus.properties</EM> file of the user contains the correct login name [RAD3rw]. Also, if the group and project differ from the default values in <EM>.gus.properties</EM>, <EM>please specify the proper group and project name on the command line using --group and --project options respectively</EM>.</P>
<P>
<H2><A NAME="cfg_file"><EM>cfg_file</EM></A></H2>
<P>This configuration file tells the plug-in how to map table/view attributes to columns in the data file. Here is a detailed description of the format:</P>
<P>You should save this file in the CVS repository, in the directory $PROJECT_HOME/RAD/DataLoad/config (the name of this file, stripped of its path, is stored by the ga as an algorithm parameter).</P>
<P>* This should be a tab-delimited text file, with 2 columns, named: ``Table.attribute'', ``value or header'' The order and case of these columns is important, and it is recommended to follow the template for the sake of consistency.</P>
<P>* Lines which start with ``#'' are ignored (use this for comments).</P>
<P>* Each (non-comment) line should contain exactly only one tab.</P>
<P>* The first column should be in the same format as ``Table.attribute'', Even if it is view, give the ImpTable name and the names in for ``attribute'' should be the attribute names as named in the view of interest.</P>
<P>* For empty fields do not use special symbols (like NA or similar), just leave that field empty or delete this line.</P>
<P>* If a line of the Template does not apply to your situation,  you do not have to enter it in your configuration file.</P>
<P>* In case the Template does not include the attribute required by your array design and is in RAD3 schema,  you can add it in your configuration file.</P>
<P>* You can have mutiple entries for annotation tables such as ArrayAnnotation, ElementAnnotation and CompositeAnnotation table. The number after annotation table name denotes each entry. For example, ArrayAnnotation1.name and ArrayAnnotation1.value. And the name attribute for annotation table should be provided as value and value attribute for annotation table as header.</P>
<P>*  For each row, only one of VALUE and HEADER can be given. If the value of a particular table attribute is constant for all data lines, enter that in the second column. Else, if the value has to be taken from the data file, put in the second column the name of the data file column containing that value (the names under second column should be identical, case and all, to how they appear in the data file). But for external_database_release_id and element_type_id, always provide them as HEADER even if they are constant for all elements.</P>
<P>* Please make sure that the column in your data file to which external_database_release_id is mapped, if present (which in most cases should be), contains valid SRes.ExternalDatabaseRelease.ext_db_ids. If this is not the case, you will need to re-parse your data file, as the plug-in will not insert any row with an invalid external_database_release_id, when this is present.</P>
<P>* It is crucial that the attributes of CompositeElememtImp that you are listing are such that each CompositeElement in your data file is uniquely identified by those attributes. For spotted array case, if one of the attributes listed should be present in each spot family and uniquely identifies a spot family (e.g. a well id might do this), make that attribute mandatory in your configuration file.</P>
<P>* It is also very important for shortOligo array, the name attribute for each shortOligoFamily should be unique, since the plugin will cache the name attribute of each shortOligoFamily and all shortOligoFamily with same name will be loaded into database once.</P>
<P>* The control.subclass_view is the name of the view of either RAD3.ElementImp or RAD3.CompositeElementImp to which Control.table_id should point for every control loaded in this run. If the controls refer to elements on the array, the subclass_view should be the name of view of RAD3.ElementImp. If the controls refer to CompositeElements on the array, the subclass_view should be the name of view of RAD3.CompositeElementImp.</P>
<P>
<H2><A NAME="data_file"><EM>data_file</EM></A></H2>
<P>The data file should be in tab-delimited text format with one header row and a row for each element. All rows should contain the same number of tabs/fields.</P>
<P>* Every element for which an external_database_release_id and source_id are available should have these stored in the database. You will need to have two columns in the data file one for each of these two fields.</P>
<P>* Empty lines in the data files are ignored. All quotes within a data line are removed by the plug-in.</P>
<P>Please double-check that your data file has no inconsistencies before loading the data. If a column in your data file contains information which should be separated and stored into different table/view attributes, you will need to re-parse your file and separate this information into different columns before running the plug-in. Similarly, if information from different columns of your data file refers to one table/view attribute, you will need to re-parse your data file and merge this information into one column.</P>
<P>
<H2><A NAME="restart"><EM>restart</EM></A></H2>
<P>If you need to restart loading from your data file from a specific line (e.g. due to previous interruptions in data loading), give the line number of this line in the --restart option. You should start your line count from the line after the header line and include any empty lines.</P>
<P>
<H2><A NAME="testnumber"><EM>testnumber</EM></A></H2>
<P>If you are testing the plug-in and want only to test n lines from your data file, use the --testnumber option. If you set this to n, it will test the plug-in on the first n data lines (counting empty lines) after the header or after --restart, if this is set.</P>
<P>
<HR>
<H1><A NAME="author">AUTHOR</A></H1>
<P>Written by Junmin Liu.</P>
<P>
<HR>
<H1><A NAME="copyright">COPYRIGHT</A></H1>
<P>Copyright Trustees of University of Pennsylvania 2003.</P>

</BODY>

</HTML>
