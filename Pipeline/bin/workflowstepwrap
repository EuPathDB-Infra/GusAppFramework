#!/usr/bin/perl

my $stepName = $ARGV[0];
my $stepClass = $ARGV[1];
my $metaConfigFile = $ARGV[2];
my $workflowId = $ARGV[3];

usage() unless scalar($ARGV) == 4;

my $step = eval "{require $stepClass;$stepClass->new($stepName, $metaConfigFile, $workflowId)}";

my $status = $step->runInWrapper($workflowId, $stepName);

exit($status);

sub usage {
    print "
Caution!! this program is only called by the workflow controller

usage: workflowstep stepname stepclass metaconfigfile workflow_id
";
    exit(1);
}




