#!@perl@


$jobcmd=$ARGV[0];
$pipelineDir=$ARGV[1];
$numprocs=$ARGV[2]*2;

if ($#ARGV != 2) {
    print "Usage:  submitPipelineJob jobcmd pipelinedir numnodes\n";
    exit(1);
}

die "pipelineDir $pipelineDir doesn't exist" unless -e $pipelineDir;

$c = `which $jobcmd`;

chomp $c;

$cmd="cmsubmit -y -d $pipelineDir/logs -w $pipelineDir/logs -p $numprocs -t 2880 -c Batch $c $pipelineDir";

system($cmd);
