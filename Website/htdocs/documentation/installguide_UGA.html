<html><head><title>HTML generated by txt2html via TOM</title></head>
<body>
<p>
ORACLE9i INSTALLATION AND GUS ARCHITECTURE DOCUMENT

</p><p>
AT Center for Tropical and Emerging Global Diseases

</p><p>
Chetna Warade<br>
chetna@uga.edu<br>
waradec@yahoo.com




</p><p>
To install Genomics Unified Schema following the are the softwares/packages required:

</p><ol>
  <li> Oracle 9i for a Database server
  </li><li> Perl 5 for user interaction with the Database server 
  </li><li> Java 2 Platforms for WWW user interaction with the Database server
  </li><li> Ant build tool


</li></ol>
<p>
First lets take a step by look at the installation process.  
 
 
</p><p>
<strong>CHAPTER 1 </strong>
</p><hr>
<p>
                                ORACLE 9i
</p><hr>

<ol>
  <li> Download the Oracle9iServer Release 2(9.2.0.1.0) for UNIX Systems 
   from the website 
   http://otn.oracle.com/software/products/oracle9i/content.html

  <ol>
    <li> Download the Complete Files
      674014720 bytes lnx_920_disk1.cpio
      603018752 bytes lnx_920_disk2.cpio
      460834304 bytes lnx_920_disk3.cpio

      
    </li><li> Directions to extract the files       

    <ul>
      <li> Run "gunzip &lt;filename&gt;" on all the files.   Eg. lnx_920_disk1.cpio.gz  
      </li><li> Extract the cpio archives with the command "cpio -idmv &lt; &lt;filename&gt;"
         Eg. cpio -idmv &lt;lnx_920_disk1.cpio          

    </li></ul>
  </li></ol>
</li></ol>
<pre>      Important Note: Some browsers will uncompress the files but leave the 
      extension the same (gz) when downloading.  If the above steps do not work 
      for you, try skipping step 1 and go directly to step 2 without changing 
      the filename. Eg. "cpio -idmv &lt;Linux9i_Disk1.cpio.gz"
</pre>

<p>
   c. Create a user id in the oracle website. This user id is very useful for
</p><p>
      debugging purposes. With this user id one can use the online documentation.


</p><p>
2) Installation of following modules from Oracle9i Enterprise Edition:

</p><pre>        Oracle9i Database 
        - Data Warehouse

        Oracle9i Client 
        - Administrator
        - Runtime

        Oracle9i Management and Integration
        - Oracle Management Server 
        - Oracle Internet Directory (failed installation)  
</pre>


<p>
3) Preinstallation steps:

</p><p>
   Setup Tasks to Perform as root User 
</p><ul>
  <li> Create Mountpoints 
      One for the software
       Disk partition of size 3534096KB on /dev/sdb1 (/home/oracle)
      One for database files
       Disk partition of size 8064304KB on /dev/sdb2 (/db_storage)
  </li><li> Configure Kernel Parameters
       created script /etc/init.d/kernelpara.sh
       In /etc/rc.d/rc2.d create symbolic link 
<p>
                 S11kernelpara -&gt; /etc/init.d/kernelpara.sh
       In /etc/rc.d/rc3.d create symbolic link 
</p><p>
                 S11kernelpara -&gt; /etc/init.d/kernelpara.sh

  </p></li><li> Create groups "dba", "oinstall" and "oapache" 
  </li><li> Create user "oracle"
<p>
           Login Name: oracle
           Primary GID: 510 (dba)
           Secondary GID: 511 (oinstall)
           Home directory: /home/oracle


</p></li></ul>
<p>
   Setup Tasks to Perform as oracle User 
</p><ul>
  <li> Set Environment Variables
   
</li></ul>
<hr>
<strong>VARIABLE              DESCRIPTION</strong>
<hr>
<pre>  DISPLAY          The name, server number and screen number where
                   of the system where Oracle Universal Installer
                   display its GUI
  PATH             Shell's search path for executables
</pre>
<hr>

<p>
4) Installation

</p><p>
   Oracle Universal Installer

</p><ul>
  <li> DO NOT RUN THE INSTALLER AS THE root USER

  <ul>
    <li> Log in as the oracle user.
    </li><li> Start the Installer from disk location
     /usr/oracle_install/Disk1/runInstaller
    After the Installer starts, the Welcome window appears.
    </li><li> Click Next.

  </li></ul>
</li></ul>
<p>
    If this is the first time any Oracle9i product has been installed on the 
    current system, the File Locations window appears. Specify the base 
    directory where you want to install the Oracle software.
    i.e /home/oracle/OraHome1
 
</p><ul>
  <li> Click Next.
   The UNIX Group Name window appears. In the UNIX Group Name field, specify 
   the ORAINVENTORY group. Members of this group are granted permission to 
   update Oracle software on the system.
   i.e oinstall

  </li><li> Click Next.
   If the /etc directory does not exist or is not writable by the oracle user,
   an Installer window appears prompting you to run the 
   /tmp/OraInstall/orainstRoot.sh script in another terminal window as the 
   root user. When the script has finished running, click Retry to continue the    installation.

</li></ul>
<p>
   The File Locations window appears. Do not change the text in the Source 
   field. The Source field specifies the location of the installation files.
  
</p><ul>
  <li> Enter the Oracle home directory path in the Destination field. The 
     directory path is where you want to install Oracle9i products. If you set 
     the ORACLE_HOME environment variable before starting the Installer, the 
     Installer uses this directory path as the default value in the Destination      field.

</li></ul>
<pre>     You must install Oracle9i products into a new Oracle home directory. You 
     cannot install Oracle9i products into a directory that contains older 
     versions of the software.
</pre>
  
<ul>
  <li> Click Next.

  </li><li> The Available Products window appears. Select the product that you want 
     to install and click Next.

  </li><li> Installing Oracle9i Database

</li></ul>
<pre>     After selecting Oracle9i database from the Available Products window, the 
     Installation Types window appears.

     - Select Enterprise, Standard, then click Next.

     Oracle9i Enterprise Edition Installation
    
         1. Select the appropriate database and click Next.

            If you select...        Then Oracle Universal Installer... 
            General Purpose         Installs a preconfigured database 
                                    optimized for general purpose usage.
            Transaction Processing  Installs a preconfigured database optimized
                                    for transaction processing. 
            Data Warehouse          Installs a preconfigured database optimized
                                    for data warehousing and OLAP. 
            Customized              Allows you to create a customized database.
                                    This option takes longer than the 
                                    pre-configured options. 
            Software Only           Installs software only and does not run any
                                    configuration tools. 
       
          NOTE - I selected Data Warehouse option. GUS is a Dataware House

     - Click Next.
     - The Database Identification window appears.
     - Enter the Global Database Name and System Identifier (SID) in the 
       appropriate fields: i.e GUS (TGUS)

     - Click Next. The Database File Location window appears.
     - In the Directory for Database Files field, enter the directory location
       of the database file, i.e /db_storage.
     - Click Next. The Database Character Set window appears
       Choose the database character set that you want to use from the 
       available options i.e default
     - Click Next. The Summary window appears.
     - Review the information to ensure that you have enough disk space and 
       click Install.

       The Install window appears and displays a progress meter. The Installer 
       goes through the install and relinking phases, so the meter adjusts for 
       each phase completion.

       NOTE - It takes a while for completion.

     - Run the root.sh script when prompted.

       The Installer creates the root.sh script in the Oracle home directory and       prompts you to run the script when it finishes installing Oracle products.      Log in as the root user and run the script. The root.sh script sets the 
       necessary file permissions for Oracle products and performs other 
       root-related configuration activities. To run the root.sh script use the        following commands:

       # cd $ORACLE_HOME
       # ./root.sh

       When the root.sh script runs successfully, return to the Oracle Universal       Installer, and click OK in the Alert window.
</pre>
    
<ul>
  <li> The End of Installation window appears.

</li></ul>
<pre>      Click Exit to exit the Oracle Universal Installer, or click Next Install 
      to install additional products. Selecting Next Install returns you to the       Oracle Universal Installer File Locations window.
</pre>

<p>
5. Post Installation

</p><p>
   Configuration Tasks to Perform as the root User

</p><p>
    -Automating Database Startup and Shutdown
    The dbstart and dbshut scripts are located in the $ORACLE_HOME/bin directory

</p><p>
    Perform the following tasks to set up the dbstart and dbshut  scripts so 
    that they are called at system startup. This process must be completed for 
    every new database that you want to configure for automated startup and 
    shutdown.
    
</p><ol>
  <li> Edit the /etc/oratab
       Database entries in the oratab file appears in the following format:

</li></ol>
<p>
<strong>ORACLE_SID:ORACLE_HOME:{Y|N}</strong>

</p><pre>       In the preceding command, Y or N specifies whether you want the dbstart 
       and dbshut scripts to start up and shut down the database. For each 
       database that you want to start up, find the ORACLE_SID entry identified        by the sid in the first field. Change the last field for each to Y.
</pre>

<p>
    2. In the /etc/rc.d/init.d directory, create a dbora script.

</p><p>
    3.  Create symbolic links to the dbora script in the appropriate run-level 
</p><pre>        script directories, as follows:
        /etc/rc.d/rc0.d/K10dbora
        /etc/rc.d/rc3.d/S30dbora
        /etc/rc.d/rc4.d/S30dbora
        /etc/rc.d/rc5.d/S30dbora
</pre>
 
<p>
   Configuration Tasks to Perform as the oracle User

</p><ul>
  <li> Setting Environment Variables i.e
/home/oracle/.bash_profile Whenever a new database is created it is
important to set the .bash_profile in bash shell (.cshrc - tcsh) for
the following env variables:
</li></ul>
<p>
        umask 0022

</p><pre>        EPC_DISABLED=F
        export EPC_DISABLED

        ORACLE_BASE=/db_storage/Oracle
        export ORACLE_BASE

        ORACLE_HOME=/home/oracle/OraHome1
        export ORACLE_HOME

        CLASSPATH=$ORACLE_HOME/JRE/lib:$ORACLE_HOME/product/jlib
        export CLASSPATH

        LD_LIBRARY_PATH=$ORACLE_HOME/lib
        export LD_LIBRARY_PATH

        ORACLE_SID=GUS
        export ORACLE_SID

        TNS_ADMIN=$ORACLE_HOME/network/admin
        export TNS_ADMIN

        DISPLAY=mango.ctegd.uga.edu:0.0
        export DISPLAY

        HOME=/home/oracle
        export HOME

        PATH=:$ORACLE_HOME/bin:/usr/local/netscape:/usr/local/Acrobat5/bin/:$PATH:$HOME/bin

        export PATH

        unset USERNAME
</pre>



<p>
   Post-Installation for Installed Oracle Products
  
</p><ul>
  <li> Configuring Oracle Net Services

</li></ul>
<p> Basic configuration of Oracle Net Services is done by Oracle Net
Configuration Assistant when it is started by Oracle Universal
Installer during installation.
</p><p>
Verify and complete your initial configuration with the following steps:

</p><ol>
  <li> Log in as root and reserve a port for the Oracle Net listener by making 
       the following entry in the /etc/services file of each Oracle Net Services       node on the network:

</li></ol>
<pre>       listener_name 1521/tcp         #Oracle Net listener
       i.e LISTENER 1521/tcp

      In the preceding command, 1521 is the default port number. If you chose a       different port when you configured the Oracle Net listener, specify that 
      port in the /etc/services file.

   2.  Check the status of the listener following the installation by using the        following command:

       $ lsnrctl status listener_name
       i.e $ /home/oracle/OraHome1/bin/lsnrctl status LISTENER

      The listener_name  field is required if the listener has a name other than      the default listener.

      If the listener is not running, start it by using the following command:

      $ lsnrctl start listener_name
       i.e $ /home/oracle/OraHome1/bin/lsnrctl start LISTENER
</pre>

<p>
   3.  Install and configure Oracle client software on a remote system, if 
</p><p>
       necessary, then start SQL*Plus to test the connection to the server.

</p><pre>       $ sqlplus username/password@net_service_name
       i.e sqlplus scott/tiger@gus

       If you can successfully connect to the server with SQL*Plus, you have 
       established network connectivity over TCP/IP.
</pre>

<p>5. Using Oracle Net Configuration Assistant
After installation is complete, a more detailed configuration can be
accomplished using the Oracle Net Configuration Assistant by using the
following command in the $ORACLE_HOME/bin directory:
</p><p>
$ netca

</p><p>Oracle Net Configuration Assistant configures the Oracle
client/server network environment. It modifies the configuration files
located in the default
$ORACLE_HOME/network/admin directory. Review the Oracle Net
Configuration Assistant procedure for your product installation choice.
</p><p>
Oracle9i Database Enterprise Edition and Standard Edition Installation

</p><p>
For Enterprise and Standard installations, the Oracle Net Configuration Assistant performs the following task:


</p><pre>      Configures the Oracle Net server environment by configuring the following files:
            listener.ora: Oracle Net Services configures a listener with the name and protocol address you select. Oracle Net Services also configures a protocol address and static service information for external procedures.

            sqlnet.ora: Oracle Net Services configures the server's network domain as the default domain, which is the same as the network domain of your system. The domain is automatically appended to any unqualified net service name given in the connect string. The sqlnet.ora file also configures the naming methods the server uses to resolve a name to connect descriptor.

            tnsnames.ora: Oracle Net Services creates a net service name entry to use for external procedure connections.
</pre>

<p>
6. Using Database Configuration Assistant
Start Database Configuration Assistant by using the dbca command located in the $ORACLE_HOME/bin directory:

</p><p>
$ dbca


</p><p>Database Configuration Assistant enables you to copy an Oracle9i
preconfigured database, or create a fully customized database to match
your selected environment and database configuration. It starts
automatically after Oracle9i software has been installed during
Oracle9i installation.
</p><p>When installing Oracle9i software using any database
configuration option other than the Custom and Software Only, the
Oracle Universal Installer prompts for a global database name and
System Identifier (SID). After Oracle9i installation is completed, the
Database Configuration Assistant uses this information to create the
database. In addition, the Database Configuration Assistant
automatically configures the static service information for the
Oracle9i database in the listener.ora file.
</p><p>In our case we need Data Warehouse option: If you select this,
the Database Configuration Assistant creates a database that is fully
enabled for data warehousing applications. The OLAP option, consisting
of support for analytic workspaces and the OLAP catalog metadata
repository (CWMLite), is included in the database.
</p><p>7. Using Oracle Enterprise Manager Configuration Assistant
Oracle Enterprise Manager Configuration Assistant is used to configure
the local Oracle Management Server. You can configure the local Oracle
Management Server by creating, upgrading or deleting an Oracle
Enterprise Manager repository.
</p><p>
Start OEM by<br>
$ oemapp console
 
</p><p>
8. Installation logs are generated in the directory
/home/oracle/oraInventory/logs 

</p><p>
Logs can be viewed to preview what options were selected during installation.

</p><p>9. Whenever a new database is created system file called as
initYourDataBaseName.ora is created in the directory $ORACLE_HOME/dbs.
</p><p>
  Alternative:<br>
<strong>CREATING A SERVER PARAMETER FILE</strong>

</p><p>
   The server parameter file must initially be created from a traditional text 
   initialization parameter file. It must be created prior to its use in the 
   STARTUP command. The CREATE SPFILE statement is used to create a server 
   parameter file. You must have the SYSDBA or the SYSOPER system privilege to 
   execute this statement.

</p><p>
   The following example creates a server parameter file from initialization 
   parameter file /u01/oracle/dbs/init.ora. In this example no SPFILE name is 
   specified, so the file is created in a platform-specific default location and   is named spfile$ORACLE_SID.ora.

</p><p>
   CREATE SPFILE FROM PFILE='/u01/oracle/dbs/init.ora';

</p><p>
   Another example, below, illustrates creating a server parameter file and 
   supplying a name.

</p><p>
   CREATE SPFILE='/u01/oracle/dbs/test_spfile.ora'
   FROM PFILE='/u01/oracle/dbs/test_init.ora';

</p><p>
   The server parameter file is always created on the machine running the 
   database server. If a server parameter file of the same name already exists 
   on the server, it is overwritten with the new information.

</p><p> Oracle recommends that you allow the database server to default
the name and location of the server parameter file. This will ease
administration of your database. For example, the STARTUP command
assumes this default location to read the parameter file.
</p><p>
   When the server parameter file is created from the initialization parameter 
   file, comments specified on the same lines as a parameter setting in the 
   initialization parameter file are maintained in the server parameter file. 
   All other comments are ignored.

</p><p> The CREATE SPFILE statement can be executed before or after
instance startup. However, if the instance has been started using a
server parameter file, an error is raised if you attempt to recreate
the same server parameter file that is currently being used by the
instance.
</p><p>
Note:

</p><p>When you use the Database Configuration Assistant (DBCA) to
create a database, it can automatically create a server parameter file
for you. </p><p>
10. Starting up the database using the oracle user login.
Login as oracle user.
</p><pre>$sqlplus "/ as sysdba"         Because this is considered as  the most secure
                               oracle login no password is asked.
</pre>
<p>
SQL&gt; startup  

<a name="section-1"><h1>STARTUP USAGE</h1></a>

</p><p>
 Starts an Oracle instance with several options, including mounting,
 and opening a database.

</p><p>
 STARTUP options | migrate_options

</p><p>
 where options has the following syntax:
</p><p>
    [FORCE] [RESTRICT] [PFILE=filename] [QUIET] [ MOUNT [dbname] |
    [ OPEN [open_options] [dbname] ] |<br>
<strong>NOMOUNT ]</strong>

</p><p>
 where open_options has the following syntax:
</p><p>
<strong>READ {ONLY | WRITE [RECOVER]} | RECOVER</strong>

</p><p>
 and where migrate_options has the following syntax:
</p><p>
    [PFILE=filename] MIGRATE [QUIET]



</p><p>
<strong>BUGS</strong><br>
Whenever oracle user logs in, should set the ORACLE_SID env variable
<strong>$ ORACLE_SID=GUS</strong><br>
$ export ORACLE_SID <br>
$ sqlplus /nolog









</p><p>
<strong>CHAPTER 2 </strong>
</p><hr>
<p>
<strong>GUS 3.0 SCHEMA INSTALLATION</strong>
</p><hr>

<p>
GUS 3.0 source code/binaries (doesn't matter as PERL is used) are
available at http://cvsweb.sanger.ac.uk/ under project name GUS. Follow
the cvs instructions on the web site.
</p><p>There are two domains in GUS 3.0 a project domain and a central
place for gus installation. The GUS build system (ANT based) allows
users to install latest copies of the source at one central location
(also accessible for all users on the system). More information is
available http://www.gusdb.org/documentation/install-setup.html
<a name="section-2"><h1>SCHEMA INSTALLATION:</h1></a>

</p><p>In order to install the GUS 3.0 schema in the database create a
new database in Oracle using instructions for Oracle 9i in chapter 1 or
use an existing Oracle database. Use the oracle user account "sys" for
creating the GUS 3.0 schema and users. Run the script create-db.sh
after modifying the sys password (depending on what passwd you have
selected for your database) in it. The script create-db.sh creates five
schemas/users Core,SRes, DoTS, TESS and RAD3 with passwords password1,
password2, password3, password4 and password5 respectively for
simplicity. It is recommended that the database administrator should
change the passwords for security reasons. </p><p>
<strong>CHAPTER 3 </strong>
</p><hr>
<p>
<strong>JAVA 2 PLATFORMS</strong>
</p><hr>

<p>
Following are the Java Platforms required for GUS user/www interface development.

</p><ol>
  <li> Java 2 Standard Edition - J2SDK 1.4.1_01
  </li><li> Java 2 Enterprise Edition - J2SDKEE 1.3.1
  </li><li> Java Web Services Developer Pack - JWSDP 1_0_01

 
</li></ol>
<p>
<strong>JAVA 2 STANDARD EDITION - J2SDK 1.4.1_01</strong>

</p><pre>     Download Java 2 SDK, Standard Edition 1.4.1_01
     -----------------------------------------------------------------

        Go to web page http://java.sun.com/j2se/1.4.1/download.html

        Click on the "Download" link in the row that contains Linux self-
        extracting file and column SDK. 

        Read the license agreement and if you agree with it Click on Accept.

        Click on the link "Download j2sdk-1_4_1_01-linux-i586.bin"
    
        Save this file to your disk.
    
        Refer to the link for installation help at (if required)
        http://java.sun.com/j2se/1.4.1/install-linux.html 

        1) Check the download file size.
        2) Copy j2sdk-1_4_1_01-linux-i586.bin to the /usr/local directory 
           to provide java environment system-wide.
        3) Run j2sdk-1_4_1_01-linux-i586.bin
 
        Unbundling the software automatically creates a directory called 
        j2sdk1.4.1_01. Note that if you choose to install the Java 2 SDK into 
        system-wide location such as /usr/local, you must first become root to 
        gain the necessary permissions. If you do not have root access, simply 
        install the Java 2 SDK into your home directory, or a subdirectory that         you have permission to write to.
</pre>



<p>
<strong>JAVA 2 ENTERPRISE EDITION - J2SDKEE 1.3.1</strong>


</p><pre>     Download Java 2 SDK, Enterprise Edition 1.3.1
     -----------------------------------------------------------------
        Go to web page http://java.sun.com/j2ee/download.html

        Under the section "1.3.1 FCS Release January 31, 2002" click the 
        link "Software &amp; Documentation" or http://java.sun.com/j2ee/sdk_1.3/

        Scroll down the web page and select a platform (Linux) and click 
        continue.

        Read the license agreement and if you agree with it Click on Accept.

        Select a mode of tranfer either HTTP or FTP.
  
        Save this file to your disk.
    
        Refer to the link for installation help at (if required)
        http://java.sun.com/j2ee/sdk_1.3/install.html#linux_soft        

        1) Check the download file size.
 
        2) cd /usr/local

        Unpacking the bundle automatically creates a subdirectory in this 
        directory called j2sdkee1.3.1.

        3) The download bundle for the software is in the 
        j2sdkee-1_3_1-linux.tar.gz file. To uncompress and unpack the download 
        bundle and run this command:

          tar xvzf j2sdkee-1_3_1-linux.tar.gz

        The j2sdkee1.3.1 directory is created and the software is installed 
        into it.

        4)  Set the environment variables.
        Before running the J2EE SDK, you must set these environment variables 
        in your .profile or .bash_profile file of your login:

        J2EE_HOME - the directory where you've installed this release.
        JAVA_HOME - the directory where the Java 2 SDK Standard Edition is 
                    installed.
        PATH      - include the bin directory beneath the directory where you've                    installed this release.

        If you need help setting these variables, paste the link
        http://java.sun.com/j2ee/sdk_1.3/install.html#env-var. 
        You need to logout and login again for these changes to take effect.
</pre>



<p>
<strong>JAVA WEB SERVICES DEVELOPER PACK - JWSDP 1_0_01</strong>


</p><pre>     Download Java Web Services Developer Pack 1.0_01
     -----------------------------------------------------------------

        Go to web page http://java.sun.com/webservices/downloads/webservicespack.html

        Scroll down the web page and select platform as UNIX because there is no        specific differences in Linux/UNIX version of JWSDP and click continue. 
</pre>

        
<p>
        Read the license agreement and if you agree with it Click on Accept.

</p><p>
        Select a mode of tranfer either HTTP or FTP.
  
</p><p>
        Save this file to your disk.

</p><pre>        Refer to the link for installation help at (if required)
        http://java.sun.com/webservices/downloads/install-unix.html

        1) Check the download file size

            If you saved the self-installing executable to disk without running             it from the download page at the Java Software website, check to see            that you have the complete file:

                example: jwsdp-1_0_01-unix.sh  31,732,238 bytes 

        2) Run the Java WSDP installer

        $ /bin/sh jwsdp-1_0_01-unix.sh

        Installed Directory Tree

        Verify that the Java WSDP has the directory structure shown below.

        * jwsdp-1_0_01
                   * LICENSE
                   * bin
                   * common
                   * conf
                   * config
                   * docs
                   * images
                   * lib
                   * logs
                   * samples
                   * server
                   * services
                   * shared
                   * temp
                   * tools
                   * unist
                   * webapps
                   * work
                   * xsl
</pre>


<p>
        3) Update the PATH variable

</p><p> You can run the Java WSDP without setting the PATH variable, or
you can optionally set it as a convenience.
</p><pre>        4) Set the PATH variable if you want to be able to conveniently run the            Java WSDP executables (startup.sh, shutdown.sh, ant, etc.) from any 
           directory without having to type the full path of the command. If you           don't set the PATH variable, you need to specifythe full path to the            executable every time you run it, such as:

        $ /home/myuser/jwsdp-1_0_01/bin/startup.sh

           It's useful to set the PATH permanently so it will persist after 
           rebooting. To set the PATH permanently, add the full path of the bin            directory in the Java WSDP installation directory to the beginning of           your PATH variable. Typically this full path looks something like 
           /home/myuser/jwsdp-1_0_01/bin.
</pre>


<a name="section-3"><h1>ANT JAVA BASED BUILD TOOL</h1></a>

<p>Download Ant build tool version 1.5.1 for building (compilation) and
installation of source code and binaries on the machine from
http://ant.apache.org/bindownload.cgi.
</p><p>
Note: GUS 3.0 is tested with Ant 1.5.1 version and is used as the build tool at CBIL and CTEGD. 


<a name="section-4"><h1>SETTING ENVIRONMENT/LOGIN FOR GUS 3.0</h1></a>

</p><p>
A sample .bash_profile file for using Oracle9i, GUS schema, Java and Perl in entirety is:

</p><p>
# .bash_profile

</p><p>
# Get the aliases and functions<br>
if [ -f ~/.bashrc ]; then
</p><p>
        . ~/.bashrc<br>
fi

</p><p>
# User specific environment and startup programs

</p><p>
export ORACLE_HOME=/home/oracle/OraHome1

</p><p>
export J2EE_HOME=/usr/local/j2sdkee1.3.1

</p><p>
export JAVA_HOME=/usr/local/j2sdk1.4.1_01

</p><p>
export JWSDP_HOME=/usr/local/jwsdp-1_0_01

</p><p>export
TOMCAT_PATH=:/usr/local/jwsdp-1_0_01/common/lib/servlet.jar:/usr/local/jwsdp-1_0_01/docs/tutorial/examples/cb/jaxrpc/build/client:/usr/local/jwsdp-1_0_01/docs/tutorial/examples/cb/jaxrpc/build/server:/usr/local/jwsdp-1_0_01/docs/tutorial/examples/cb/jaxrpc/build/service-class:/usr/local/jwsdp-1_0_01/docs/tutorial/examples/cb/jaxrpc/build/registry
</p><p>
export CLASSPATH=$JAVA_HOME/lib/tools.jar:$JAVA_HOME/jre/lib/rt.jar:$TOMCAT_PATH

</p><p>
export PATH=:/usr/local/netscape:/usr/local/Acrobat5/bin/:$JAVA_HOME/bin:$JWSDP_HOME/bin:$ORACLE_HOME/bin:$PATH:$HOME/bin


</p><p>
export GUS_HOME=/home/gusdev/gus.2.0.1/source-code/gusdev-src-sep-10-2002
export LD_LIBRARY_PATH=/home/oracle/OraHome1/lib
export PERL5LIB=$GUS_HOME/perl/lib:$GUS_HOME/lib
export CATALINA_HOME=/usr/local/jwsdp-1_0_01
export GUS_CFG=$GUS_HOME<br>
export DBI_DSN="dbi:Oracle:host=mango.ctegd.uga.edu;sid=GUS"
export ORACLE_SID=GUS

<a name="section-5"><h1>NOTE</h1></a>
1) Setting up the env variable CLASSPATH is very important otherwise it
may cause problems in using java compilers and java tools like run-time
linker/debugger.
</p><p>
2) Refer http://www.gusdb.org/documentation/install-setup.html for setting environment variables for GUS 3.0 





<a name="section-6"><h1>JAVA SERVLET INTERFACE INSTALLATION INSTRUCTIONS:    GENERAL</h1></a>

</p><p> -Download the external Java libraries mentioned in the
prerequisites. -Edit $GUS_HOME/www/install/installServletNew.pl; the
section labeled "EDIT THIS SECTION AS NEEDED" contains a number of
variables that must be set to tell the script where to find and place a
number of files.
</p><p>
 -Set the ORACLE_HOME and LD_LIBRARY_PATH environment variables as described in the
  prerequisites; both in the environment of the user that will run Tomcat and also
  in the Apache httpd.conf file (with 'SetEnv' directives)
 -cd into the $GUS_HOME/www/install directory and run installServletNew.pl
 -Edit the installed web.xml file as neeeded
 -Start the servlet engine<br>
 -Check the following logs for any errors:
   /var/log/httpd/error_log  (i.e., httpd error log)
   $CATALINA_HOME/logs/*<br>
   servlet log file (location depends on what is specified in web.xml)


<a name="section-7"><h1>JAVA SERVLET INTERFACE INSTALLATION INSTRUCTIONS:    GUS 3.0</h1></a>

</p><p>In addition to following the steps the section JAVA SERVLET
INTERFACE INSTALLATION INSTRUCTIONS: GENERAL you need to download tag
libraries (binary) from
http://www.apache.org/dist/jakarta/taglibs/standard/binaries/ for GUS
3.0
</p><p>
<strong>CHAPTER 4 </strong>
</p><hr>
<p>
<strong>LEARNING GUS 3.0</strong>
</p><hr>

<p>GUS 3.0 source code/binaries (doesn't matter as PERL is used) are
available at http://cvsweb.sanger.ac.uk/ under project name GUS. Follow
the cvs instructions on the web site.
<a name="section-8"><h1>PERL MODULES:</h1></a>

</p><p>
Following are the PERL modules needed for GUS 3.0 and are available at http://cpan.org:

</p><ol>
  <li> DBI 1.28 
The Perl Database Interface 

  </li><li> DBD Oracle 1.12
An Oracle 7 and Oracle 8 interface for Perl 5 but also works for Oracle 9i 

  </li><li>
PerlTools 1.2.0a A Java package built using OROMatcher(TM) that makes
Perl regular expressions extremely easy to use by taking the
responsibility of compiling and matching out of the programmer's hands.
</li><li> GD 1.32
GD.pm -- A perl5 interface to Thomas Boutell's gd library. This is a
autoloadable interface module for libgd, a popular library for creating
and manipulating PNG files. With this library you can create PNG images
on the fly or modify existing files. This version of GD REQUIRES libgd
1.8.3 or higher.
<p>Note: The latest GD 2.07 is available but requires libgd 2.0.12 or
higher located in /usr/lib directory (default linux installation - may
vary depending on system configuration) </p><p>
</li>
<li>XML::Simple
An easy API to read/write XML (esp config files). XML::Simple requires
a module capable of parsing XML - either XML::SAX or XML::Parser must
be installed (if you're running ActivePerl, you'll already have
XML::Parser installed). 
<li>Tie::IxHash
Implements ordered hashes
<li>Parse::Yapp
Used by GUS's Genbank parser
</ol>
<a name="section-9"><h1>INITIAL DATA SETUP FOR GUS 3.0</h1></a>
</p><p>
Background:<br>
Suppose in a bioinformatics laboratory there are different projects
undertaken and there are several groups working on projects. A
GUS/database user belongs to a group (e.g. to the bioinformatics lab)
and can work on several projects at the same time. Accordingly then
information goes to table Core.ProjectInfo, Core.GroupInfo and
Core.UserInfo (read further for more information). </p><p>
Creating GUS 3.0 users:<br>
There are two types of users in GUS system: an Oracle/database user and
the GUS 3.0 user. The Oracle/DB user account allows user to login into
Oracle database using command line utility like SQLPlus and perform
various database related operations. A GUS user account is created
using both Oracle user account and the machine/system/operating system
user account. This two level user account helps maintain tight security
and controlled information flow within the organization and GUS as well
(GUS/database could be synonyms in this case). </p><p>
Following are steps required for GUS Administrator/DBA to start GUS 3.0 from scratch (could also create am .sql script):
INSERT INTO CORE.AlgorithmParamKeyType VALUES(0,'string',SYSDATE,1,1,1,1,1,1,1,1,1,1);
INSERT INTO CORE.AlgorithmParamKeyType VALUES(1,'float',SYSDATE,1,1,1,1,1,1,1,1,1,1);
INSERT INTO CORE.AlgorithmParamKeyType VALUES(2,'int',SYSDATE,1,1,1,1,1,1,1,1,1,1);
INSERT INTO CORE.AlgorithmParamKeyType VALUES(3,'ref',SYSDATE,1,1,1,1,1,1,1,1,1,1);
INSERT INTO CORE.AlgorithmParamKeyType VALUES(4,'boolean',SYSDATE,1,1,1,1,1,1,1,1,1,1);
INSERT INTO CORE.AlgorithmParamKeyType VALUES(5,'date',SYSDATE,1,1,1,1,1,1,1,1,1,1);

</p><p>
NOTE: It is imperative that the DBA will set the read/write permission
according to the security and row_user_id, row_group_id and
row_project_id depending on custom data.
</p><p>
Following are steps required for GUS Administrator/DBA to create GUS 3.0 users:

</p><ol>
  <li> Grant permissions (insert, select, delete, update and
references) using grantPermissions.sql to the new Oracle user account
from CORE,SRES,TESS,DOTS and RAD3 depending upon project requirements.
e.g.
grantPermissions.pl --db-sid=GUS --db-host=mango.ctegd.uga.edu
--permissions=select,insert,delete,update,references
--grantees=luchtan,gus30 --owner=dots --login=dots
Enter password at the prompt </li><li> Set up the GUS config file:
$ cp $PROJECT_HOME/install/gus.properties.sample $GUS_CONFIG_FILE
Edit the config file to reflect your personal information; this file
will be read by the various GUS applications and plugins to determine
such things as: which Oracle server to connect to; which Oracle logins
to use for read-only and/or read-write access to the GUS database; your
GUS username, default group, and default project. You may have multiple
GUS config files, but will need to change your GUS_CONFIG_FILE
environment variable whenever you wish to switch between them. </li><li> Adding project, group and user information in the
database/GUs 3.0
The DBA should add project information in Core.ProjectInfo table, group
information in Core.GroupInfo, machine information in Core.Machine and
GUS user information Core.Userinfo. Following are the dependencies:
Core.ProjectInfo.Project_id equal to Core.UserInfo.Row_Project_id
Core.GroupInfo.Group_id equal to Core.UserInfo.Row_Group_id </li><li> Matching GUS config file with the database
Make
userName of .gus.properties equal to login of CORE.USERINFO
group of .gus.properties equal to name of CORE.GROUPINFO 
project of .gus.properties equal to name of CORE.PROJECTINFO


</li></ol>
<a name="section-10"><h1>GUS PERL OBJECT LAYER:</h1></a>
Before starting to use the perl object layer all core plugins need to be registered in the database, do
$ga +meta +create

<p>
Help can be viewed by e.g.<br>
ga GUS::Supported::Plugin::LoadTaxon --help

</p><p>
Debugging can be done using --debug, --verbose or --veryVerbose options
and not using --commit option. By default --commit is set as off. </p><ol>
  <li> Taxonomy

  </li><li> Download taxonomy file
taxdump.tar.gz from ftp://ftp.ncbi.nih.gov/pub/taxonomy/
b)ga +create GUS::Supported::Plugin::LoadTaxon --commit c)ga
GUS::Supported::Plugin::LoadTaxon --gencode=/file-path/gencode.dmp
--names=/file-path/names.dmp --nodes=/file-path/nodes.dmp --commit
</li></ol>
<p>
NOTE: use all the three options of ga GUS::Supported::Plugin::LoadTaxon --gencode, --names and --nodes at the same time/together

</p><p>
2) GenBank

</p><ol>
  <li> Download nucleotide data from GenBank http://www.ncbi.nlm.nih.gov/Entrez/
and for example say typed query is "trypanosoma cruzi", set limit without EST and then save the files.
b)ga +create GUS::Supported::Plugin::GBParser --commit 
  </li><li>
For loading GenBank data just needs one entry about the source database
(e.g. GenBank) in sres.externaldatabase and
sres.externaldatabaserelease. For the sequences which come from other
databases GBParser automatically fills both the sres.external database
and sres.externaldatabaserelease tables.
</li></ol>
<p>
e.g.  Sres.ExternalDatabase

</p><p>
insert into sres.externaldatabase values('GenBank (nrdb)','genbank (nrdb)', SYSD
<strong>ATE,1,1,1,1,1,0,6,3,2,1);</strong>

</p><p>
Sres.ExternalDatabaseRelease<br>
insert into sres.externaldatabaserelease values(135,1,15-APR-03,'Tcruzi', SYSDATE,1,1,1,1,1,0,6,3,2,1);

</p><p>
and Dots.SequenceType (create a .sql script)

</p><p>insert into Dots.sequencetype values
(1,'DNA',null,null,1,1,'DNA', 'DNA,unkown
standedness',SYSDATE,1,1,1,1,1,0,6,3,2,1);
insert into Dots.sequencetype values (2,'RNA',null,null,1,1,'RNA',
'RNA,unkown standedness',SYSDATE,1,1,1,1,1,0,6,3,2,1);
insert into Dots.sequencetype values (3,'DNA',null,'ds',2,1,'ds-DNA',
'double stranded DNA',SYSDATE,1,1,1,1,1,0,6,3,2,1);
insert into Dots.sequencetype values (4,'DNA',null,'ss',2,1,'ss-DNA',
'single stranded DNA',SYSDATE,1,1,1,1,1,0,6,3,2,1);
insert into Dots.sequencetype values (5,'DNA',null,'ss',2,2,'ss-RNA',
'single stranded RNA',SYSDATE,1,1,1,1,1,0,6,3,2,1);
insert into Dots.sequencetype values (6,'RNA',null,'ds',2,2,'ds-RNA',
'single stranded RNA',SYSDATE,1,1,1,1,1,0,6,3,2,1);
insert into Dots.sequencetype values (7,'RNA','mRNA','ss',3,5,'mRNA',
'mRNA',SYSDATE,1,1,1,1,1,0,6,3,2,1);
insert into Dots.sequencetype values (8,'RNA','est','ss',3,5,'EST',
'EST - could be mRNA, rRNA...',SYSDATE,1,1,1,1,1,0,6,3,2,1);
insert into Dots.sequencetype values (9,'RNA','tRNA','ss',3,5,'tRNA',
'tRNA',SYSDATE,1,1,1,1,1,0,6,3,2,1);
insert into Dots.sequencetype values (10,'RNA','rRNA','ss',3,5,'rRNA',
'rRNA',SYSDATE,1,1,1,1,1,0,6,3,2,1);
insert into Dots.sequencetype values
(11,'unknown',null,null,1,11,'unknown',
'unkown',SYSDATE,1,1,1,1,1,0,6,3,2,1);
insert into Dots.sequencetype values
(12,'RNA','predicted_mRNA','ss',2,1,'predicted_mRNA', 'mRNA sequence
predicted by an algorithm from genomic
DNA',SYSDATE,1,1,1,1,1,0,6,3,2,1);
insert into Dots.sequencetype values
(13,'virtual',null,null,1,null,'virtual', 'virtual nuclieic acid
sequence',SYSDATE,1,1,1,1,1,0,6,3,2,1);
insert into Dots.sequencetype values (14,'DNA','GSS','ds',3,3,'GSS',
'Genome Survey Sequence',SYSDATE,1,1,1,1,1,0,6,3,2,1);
insert into Dots.sequencetype values
(15,'DNA','oligonucleotide','ss',3,4,'oligonucleotide', 'synthetic
single stranded oligonucleotide ',SYSDATE,1,1,1,1,1,0,6,3,2,1);
</p><p>
3) GOOntology

</p><ol>
  <li> Download the three gene ontology files located at
 ftp://ftp.geneontology.org/pub/go/ontology/
 They are named process.ontology, component.ontology, and function.ontology.
  </li><li> ga +create GUS::Supported::Plugin::LoadGeneOntology --commit 
  </li><li>
Use --createRelease option when running the plugin to automatically
generate an External Database Release Id in
SRes.ExternalDatabaseRelease for these releases of the ontology
branches. Add entries in SRes.ExternalDatabase with names "GO
Function", "GO Component", and "GO Process".
</li></ol>
<p>
e.g. SRes.ExternalDatabase

</p><p>
##These id values 92,93,94 are used because they were the next in order..
insert into Sres.Externaldatabase values(92,'GO Function','go function',SYSDATE,1,1,1,1,1,0,6,3,2,1);
insert into Sres.Externaldatabase values(93,'GO Component','go component',SYSDATE,1,1,1,1,1,0,6,3,2,1);
insert into Sres.Externaldatabase values(94,'GO Process','go process',SYSDATE,1,1,1,1,1,0,6,3,2,1);

</p><p>
SRes.GORelationshiptype

</p><p>
insert into sres.GORelationshiptype values(1, 'isa',SYSDATE, 1,1,1,1,1,0,6,3,2,1);
insert into sres.GORelationshiptype values(2, 'partof',SYSDATE, 1,1,1,1,1,0,6,3,2,1);

</p><p>NOTE: Since we loaded GO data from scratch we encountered
problems in ancestor_go_term_id in table SRes.GOTerm. Login as SReS in
the database and modify as following: </p><p>
alter table goterm modify (ancestor_go_term_id number(10) null);

</p><p>
<strong>NOTE: 05/22/2003</strong>

</p><p>
We had comment off line 500 to overcome an error but I guess in future this willgo away as GUS is constantly evolving.

</p><p>
(line 500 of LoadGoOntology.pm):

</p><p>
my $ontologyGoTerm = GUS::Model::SRes::GOTerm-&gt;new({
go_id  =&gt; $rootGoId,<br>
external_database_release_id =&gt; $extDbRelId,
source_id =&gt; $rootEntry-&gt;getId(),<br>
name  =&gt; $rootEntry-&gt;getName(), #just the name
definition   =&gt; $rootEntry-&gt;getName(),<br>
minimum_level =&gt; 0,<br>
maximum_level =&gt; 0,<br>
number_of_levels =&gt; 1,<br>
ancestor_go_term_id =&gt; $tempAncestorId,  &lt;=== COMMENT THIS LINE
} );


</p><p>
4) TIGR XML data

</p><p>
Under Construction


</p></body></html>
