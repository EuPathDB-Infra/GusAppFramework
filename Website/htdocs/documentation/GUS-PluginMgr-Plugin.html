<HTML>
<HEAD>
<TITLE>/home/sfischer/projects/GUS/PluginMgr/lib/perl/Plugin.pm</TITLE>
<LINK REV="made" HREF="mailto:bhcompile@daffy.perf.redhat.com">
</HEAD>

<BODY>

<A NAME="__index__"></A>
<!-- INDEX BEGIN -->

<UL>

	<LI><A HREF="#name">Name</A></LI>
	<LI><A HREF="#description">Description</A></LI>
	<LI><A HREF="#methods">Methods</A></LI>
	<UL>

		<LI><A HREF="#constructor">Constructor</A></LI>
		<LI><A HREF="#initialization">Initialization</A></LI>
		<LI><A HREF="#setters">Setters</A></LI>
		<LI><A HREF="#getters">Getters</A></LI>
		<LI><A HREF="#utilities">Utilities</A></LI>
		<LI><A HREF="#error handling">Error handling</A></LI>
		<LI><A HREF="#logging">Logging</A></LI>
		<LI><A HREF="#sql utilities">SQL utilities</A></LI>
		<LI><A HREF="#deprecated">Deprecated</A></LI>
	</UL>

</UL>
<!-- INDEX END -->

<HR>
<P>
<H1><A NAME="name">Name</A></H1>
<P><CODE>GUS::PluginMgr::Plugin</CODE></P>
<P>
<HR>
<H1><A NAME="description">Description</A></H1>
<P><CODE>GUS::PluginMgr::Plugin</CODE> is the superclass of all GusApplication plugins.</P>
<P>Unless otherwise noted, all of its methods are <EM>instance</EM> methods.  That is,
they are called like this:  <CODE>$self-&gt;my_instance_method();</CODE></P>
<P>
<HR>
<H1><A NAME="methods">Methods</A></H1>
<P>
<H2><A NAME="constructor">Constructor</A></H2>
<DL>
<DT><STRONG><A NAME="item_new"><CODE>new()</CODE></A></STRONG><BR>
<DD>
Construct a new Plugin.  This method <EM>must be overridden</EM> by the plugin subclass.  That is, the subclass must have its own <A HREF="#item_new"><CODE>new</CODE></A> method which must:
<P>- create and <CODE>bless</CODE> a <CODE>$self</CODE></P>
<P>- call the <A HREF="#item_initialize"><CODE>initialize</CODE></A> method described below</P>
<P>- return <CODE>$self</CODE></P>
<P><STRONG>Return type:</STRONG> hash ref</P>
<P></P></DL>
<P>
<H2><A NAME="initialization">Initialization</A></H2>
<DL>
<DT><STRONG><A NAME="item_initialize"><CODE>initialize($argsHashRef)</CODE></A></STRONG><BR>
<DD>
Initialize the plugin.  This method is called in the plugin's <A HREF="#item_new"><CODE>new</CODE></A> method.
<P><STRONG>Parameters</STRONG></P>
<P>- argsHashRef (hash ref).  This argument is a hash ref which must contain the following key values pairs:</P>
<UL>
<LI><STRONG><A NAME="item_requiredDbVersion">requiredDbVersion (string)</A></STRONG><BR>

<LI><STRONG><A NAME="item_cvsRevision">cvsRevision (string)</A></STRONG><BR>

The CVS revision number (eg 1.11) of the plugin.  The value for this key <EM>must</EM> be specified using the CVS magic substitution format.  In particular, it must be: <CODE>'$Revision$'</CODE>. CVS will substitute in the revision number, so that, after substitution, the value will be, eg, <CODE>'$Revision$</CODE>'
<P></P>
<LI><STRONG><A NAME="item_cvsTag">cvsTag (string)</A></STRONG><BR>

The CVS tag (ie, the software release it is from) of the plugin.  The value for this key <EM>must</EM> be specified using the CVS magic substitution format.  In particular, it must be: <CODE>'$Name$'</CODE>. CVS will substitute in the tag, so that, after substitution, the value will be, eg, <CODE>'$Name$</CODE>'
<P></P>
<LI><STRONG><A NAME="item_name">name (string)</A></STRONG><BR>

The name of the plugin.  This value for this key <EM>must</EM> be specified like this: <CODE>ref($self)</CODE>.
<P></P>
<LI><STRONG><A NAME="item_usage">usage (string)</A></STRONG><BR>

An explanation of the usage of the plugin.  The value for this key is used for two purposes:  to inform the user of the plugins usage when the user supplies the --usage argument; and, it is written into the description field of the Core.Algorithm table when the plugin is first registered in the database (by using ga +create).
<P></P>
<LI><STRONG><A NAME="item_revisionNotes">revisionNotes (string)</A></STRONG><BR>

An explanation of what is new in this revision of the plugin.  This value is written into the description field of the Core.AlgorithmImplementation table when the plugin's registration is updated (by using ga +update).
<P></P>
<LI><STRONG><A NAME="item_easyCspOptions">easyCspOptions (reference to an array of hash refs)</A></STRONG><BR>

A specification of the command line arguments for the plugin.  Each hash ref in the array specifies a single command line argument.  The keys in the array are:
<DL>
<DT><STRONG><A NAME="item_o">o</A></STRONG><BR>
<DD>
Required.  Specifies the argument's name (o for option). This must be a single word.  The user will use it on the command line this this:  --arg_name.
<P></P>
<DT><STRONG><A NAME="item_h">h</A></STRONG><BR>
<DD>
Required.  A helpful description for the argument (h for help).
<P></P>
<DT><STRONG><A NAME="item_d">d</A></STRONG><BR>
<DD>
Optional.  The default value, if there is one.
<P></P>
<DT><STRONG><A NAME="item_r">r</A></STRONG><BR>
<DD>
Optional.  True (=1) if the argument is required.
<P></P>
<DT><STRONG><A NAME="item_t">t</A></STRONG><BR>
<DD>
Required.  Specifies the data type of the argument.  Allowed types are: id, float, int, date, string, boolean, table_id.
<P></P></DL>
</UL>
<P><STRONG>Return type:</STRONG> none</P>
</DL>
<P>
<H2><A NAME="setters">Setters</A></H2>
<DL>
<DT><STRONG><A NAME="item_setResultDescr"><CODE>setResultDescr($resultDescrip)</CODE></A></STRONG><BR>
<DD>
Set the result description.  This value is stored in the database in the AlgorithmInvocation table's result column after the plugin completes.
<P><STRONG>Params:</STRONG></P>
<P>- resultDescrip: a description of the plugin's main result for posterity.</P>
<P><STRONG>Return type:</STRONG> <CODE>string</CODE></P>
<P></P></DL>
<P>
<H2><A NAME="getters">Getters</A></H2>
<DL>
<DT><STRONG><A NAME="item_getUsage"><CODE>getUsage()</CODE></A></STRONG><BR>
<DD>
Get the plugin's usage.  This value is set by the <A HREF="#item_initialize"><CODE>initialize</CODE></A> method.
<P><STRONG>Return type:</STRONG> <CODE>string</CODE></P>
<P></P>
<DT><STRONG><A NAME="item_getRequiredDbVersion"><CODE>getRequiredDbVersion()</CODE></A></STRONG><BR>
<DD>
Get the plugin's required database version.  This value is set by the <A HREF="#item_initialize"><CODE>initialize</CODE></A> method.
<P><STRONG>Return type:</STRONG> <CODE>string</CODE></P>
<P></P>
<DT><STRONG><A NAME="item_getCVSRevision"><CODE>getCVSRevision()</CODE></A></STRONG><BR>
<DD>
Get the plugin's CVS revision number.  This value is set by the <A HREF="#item_initialize"><CODE>initialize</CODE></A> method.
<P><STRONG>Return type:</STRONG> <CODE>string</CODE></P>
<P></P>
<DT><STRONG><A NAME="item_getResultDescr"><CODE>getResultDescr</CODE></A></STRONG><BR>
<DD>
Get the result description.
<P><STRONG>Return type:</STRONG> <CODE>string</CODE></P>
<P></P>
<DT><STRONG><A NAME="item_getCVSTag"><CODE>getCVSTag()</CODE></A></STRONG><BR>
<DD>
Get the plugin's CVS tag.  This value is set by the <A HREF="#item_initialize"><CODE>initialize</CODE></A> method.
<P><STRONG>Return type:</STRONG> <CODE>string</CODE></P>
<P></P>
<DT><STRONG><A NAME="item_getRevisionNotes"><CODE>getRevisionNotes()</CODE></A></STRONG><BR>
<DD>
Get the plugin's revision notes.  This value is set by the <A HREF="#item_initialize"><CODE>initialize</CODE></A> method.
<P><STRONG>Return type:</STRONG> <CODE>string</CODE></P>
<P></P>
<DT><STRONG><A NAME="item_getEasyCspOptions"><CODE>getEasyCspOptions()</CODE></A></STRONG><BR>
<DD>
Get the plugin's EasyCsp options.  This value is set by the <A HREF="#item_initialize"><CODE>initialize</CODE></A> method.
<P><STRONG>Return type:</STRONG> <CODE>string</CODE></P>
<P></P>
<DT><STRONG><A NAME="item_getName"><CODE>getName()</CODE></A></STRONG><BR>
<DD>
Get the name of the plugin, eg, <CODE>GUS::Supported::Plugin::LoadRow</CODE>
<P><STRONG>Return type:</STRONG> <CODE>string</CODE></P>
<P></P>
<DT><STRONG><A NAME="item_getFile"><CODE>getFile()</CODE></A></STRONG><BR>
<DD>
Get the full path of the file that contains the plugin, eg, /home/me/gushome/lib/perl/GUS/Supported/Plugin/LoadRow.pm
<P><STRONG>Return type:</STRONG> <CODE>string</CODE></P>
<P></P>
<DT><STRONG><A NAME="item_getArgs"><CODE>getArgs()</CODE></A></STRONG><BR>
<DD>
Get the plugin's command line arguments.  To access these within the plugin, use: <A HREF="#item_getArgs"><CODE>$self-&gt;getArgs()-&gt;{arg_name}</CODE></A>.
<P><STRONG>Return type:</STRONG> Hash reference</P>
<P></P>
<DT><STRONG><A NAME="item_getDb"><CODE>getDb()</CODE></A></STRONG><BR>
<DD>
Get the DbiDatabase object which represents the database this plugin accesses.
<P><STRONG>Return type:</STRONG> <CODE>GUS::ObjRelP::DbiDatabase</CODE></P>
<P></P>
<DT><STRONG><A NAME="item_getAlgInvocation"><CODE>getAlgInvocation()</CODE></A></STRONG><BR>
<DD>
Get the AlgorithmInvocation which tracks the running of this plugin in the database.
<P><STRONG>Return type:</STRONG> <CODE>GUS::Model::Core::AlgorithmInvocation</CODE></P>
<P></P>
<DT><STRONG><A NAME="item_getQueryHandle"><CODE>getQueryHandle()</CODE></A></STRONG><BR>
<DD>
Get the DbiDbHandle which this plugin uses to access the database.
<P><STRONG>Return type:</STRONG> <CODE>GUS::ObjRelP::DbiDbHandle</CODE></P>
<P></P>
<DT><STRONG><A NAME="item_getCheckSum"><CODE>getCheckSum()</CODE></A></STRONG><BR>
<DD>
Get an md5 digest checksum of the perl file which codes this plugin.  (This is used by GusApplication when registering the plugin in the database.)
<P><STRONG>Return type:</STRONG> <CODE>string</CODE></P>
<P></P>
<DT><STRONG><A NAME="item_getAlgorithm"><CODE>getAlgorithm()</CODE></A></STRONG><BR>
<DD>
Get the Algorithm that represents this plugin in the database.
<P><STRONG>Return type:</STRONG> <CODE>GUS::Model::Core::Algorithm</CODE></P>
<P></P>
<DT><STRONG><A NAME="item_getImplementation"><CODE>getImplementation()</CODE></A></STRONG><BR>
<DD>
Get the AlgorithmImplementation that represents this version of this plugin in the database.
<P><STRONG>Return type:</STRONG> <CODE>GUS::Model::Core::AlgorithmImplementation</CODE></P>
<P></P></DL>
<P>
<H2><A NAME="utilities">Utilities</A></H2>
<DL>
<DT><STRONG><A NAME="item_className2oracleName"><CODE>className2oracleName($className)</CODE></A></STRONG><BR>
<DD>
Convert a perl style class name for a database object to the form required in an SQL statement.  For example, convert Core::Algorithm to core.algorithm
<P><STRONG>Parameters:</STRONG></P>
<P>- className (string):  A class name in the form: GUS::Model::Core::Algorithm or Core::Algorithm</P>
<P><STRONG>Return type:</STRONG> <CODE>string</CODE></P>
<P></P>
<DT><STRONG><A NAME="item_undefPointerCache"><CODE>undefPointerCache()</CODE></A></STRONG><BR>
<DD>
Clear out the GUS Object Layer's cache of database objects.  The object cache holds 10000 objects by default.  (You can change its capacity by calling <A HREF="#item_getDb"><CODE>$self-&gt;getDb()-&gt;setMaximumNumberOfObjects()</CODE></A>.)  Typically a plugin may loop over a set of input, using a number of objects for each iteration through the loop.  Because the next time through the loop will not need those objects, it is good practice to call <A HREF="#item_undefPointerCache"><CODE>$self-&gt;undefPointerCache()</CODE></A> at the bottom of the loop to avoid filling the cache with objects that are not needed anymore.
<P></P></DL>
<P>
<H2><A NAME="error handling">Error handling</A></H2>
<DL>
<DT><STRONG><A NAME="item_error"><CODE>error()</CODE></A></STRONG><BR>
<DD>
Handle a fatal error in a plugin.  This method terminates the plugin gracefully, writing the provided message to STDERR.  It also writes a stack trace showing where the error occurred.
<P>When the plugin is terminated, GusApplication will still catch the error and attempt to track the plugin's failure in the database.</P>
<P>Do not use this method to report user errors such as invalid argument values (use <A HREF="#item_userError"><CODE>userError</CODE></A> for that).</P>
<P><STRONG>Parameters</STRONG></P>
<P>- msg (string):  the error message to write.</P>
<P></P>
<DT><STRONG><A NAME="item_userError"><CODE>userError($msg)</CODE></A></STRONG><BR>
<DD>
Handle a fatal user error in a plugin.  This method terminates the plugin gracefully, writing the provided message to STDERR.  It it intended only for errors made by the user of the plugin (such as incorrect argument values).
<P><STRONG>Parameters</STRONG></P>
<P>- msg (string):  the error message to write.</P>
<P></P></DL>
<P>
<H2><A NAME="logging">Logging</A></H2>
<DL>
<DT><STRONG><A NAME="item_log"><CODE>log($msg1, $msg2, ...)</CODE></A></STRONG><BR>
<DD>
Write a date stamped tab delimited message to STDERR.  The messages supplied as arguments are joined with tabs in between.
<P><STRONG>Parameters</STRONG></P>
<P>- @messages (list of strings):  the error messages to write.</P>
<P></P>
<DT><STRONG><A NAME="item_logDebug"><CODE>logDebug($msg1, $msg2, ...)</CODE></A></STRONG><BR>
<DD>
Write a date stamped tab delimited debugging message to STDERR.  The messages supplied as arguments are joined with tabs in between.  It will only be written if the user specifies the <CODE>--debug</CODE> argument.
<P><STRONG>Parameters</STRONG></P>
<P>- @messages (list of strings):  the error messages to write.</P>
<P></P>
<DT><STRONG><A NAME="item_logVerbose"><CODE>logVerbose($msg1, $msg2, ...)</CODE></A></STRONG><BR>
<DD>
Write a date stamped tab delimited debugging message to STDERR.  The messages supplied as arguments are joined with tabs in between.  It will only be written if the user specifies the <CODE>--verbose</CODE> argument.
<P><STRONG>Parameters</STRONG></P>
<P>- @messages (list of strings):  the error messages to write.</P>
<P></P>
<DT><STRONG><A NAME="item_logVeryVerbose"><CODE>logVeryVerbose($msg1, $msg2, ...)</CODE></A></STRONG><BR>
<DD>
Write a date stamped tab delimited debugging message to STDERR.  The messages supplied as arguments are joined with tabs in between.  It will only be written if the user specifies the <CODE>--veryVerbose</CODE> argument.
<P><STRONG>Parameters</STRONG></P>
<P>- @messages (list of strings):  the error messages to write.</P>
<P></P>
<DT><STRONG><A NAME="item_logData"><CODE>logData($msg1, $msg2, ...)</CODE></A></STRONG><BR>
<DD>
Write a date stamped tab delimited debugging message to STDOUT.  The messages supplied as arguments are joined with tabs in between.
<P><STRONG>Parameters</STRONG></P>
<P>- @messages (list of strings):  the error messages to write.</P>
<P></P>
<DT><STRONG><A NAME="item_logAlgInvocationId"><CODE>logAlgInvocationId()</CODE></A></STRONG><BR>
<DD>
Log to STDERR the id for the AlgorithmInvocation that represents this run of the plugin in the database.
<P></P>
<DT><STRONG><A NAME="item_logCommit"><CODE>logCommit()</CODE></A></STRONG><BR>
<DD>
Log to STDERR the state of the commit flag for this run of the plugin.
<P></P>
<DT><STRONG><A NAME="item_logArgs"><CODE>logArgs()</CODE></A></STRONG><BR>
<DD>
Log to STDERR the argument values used for this run of the plugin.
<P></P></DL>
<P>
<H2><A NAME="sql utilities">SQL utilities</A></H2>
<DL>
<DT><STRONG><A NAME="item_sql_get_as_array"><CODE>sql_get_as_array()</CODE></A></STRONG><BR>
<DD>
<STRONG>Return type:</STRONG> <CODE>string</CODE>
<P></P>
<DT><STRONG><A NAME="item_%28%29"><CODE>()</CODE></A></STRONG><BR>
<DD>
<STRONG>Return type:</STRONG> <CODE>string</CODE>
<P></P>
<DT><STRONG><CODE>()</CODE></STRONG><BR>
<DD>
<STRONG>Return type:</STRONG> <CODE>string</CODE>
<P></P>
<DT><STRONG><CODE>()</CODE></STRONG><BR>
<DD>
<STRONG>Return type:</STRONG> <CODE>string</CODE>
<P></P>
<DT><STRONG><CODE>()</CODE></STRONG><BR>
<DD>
<STRONG>Return type:</STRONG> <CODE>string</CODE>
<P></P></DL>
<P>
<H2><A NAME="deprecated">Deprecated</A></H2>
<DL>
<DT><STRONG><A NAME="item_getSelfInv"><CODE>getSelfInv()</CODE></A></STRONG><BR>
<DD>
Replaced by <A HREF="#item_getAlgInvocation"><CODE>getAlgInvocation</CODE></A>
<P></P>
<DT><STRONG><A NAME="item_getCla"><CODE>getCla()</CODE></A></STRONG><BR>
<DD>
Replaced by <A HREF="#item_getArgs"><CODE>getArgs</CODE></A>
<P></P>
<DT><STRONG><A NAME="item_logAlert"><CODE>logAlert()</CODE></A></STRONG><BR>
<DD>
Replaced by <A HREF="#item_log"><CODE>log</CODE></A>
<P></P>
<DT><STRONG><A NAME="item_getOk"><CODE>getOk()</CODE></A></STRONG><BR>
<DD>
This method is replaced by the <CODE>die/eval</CODE> facilities of perl.  Instead of using <CODE>setOK(0)</CODE>, use <CODE>die</CODE>.
<P></P>
<DT><STRONG><A NAME="item_setOk"><CODE>setOk()</CODE></A></STRONG><BR>
<DD>
This method is replaced by the <CODE>die/eval</CODE> facilities of perl.  Instead of using <CODE>getOK()</CODE>, use <CODE>eval</CODE>.
<P></P>
<DT><STRONG><A NAME="item_logRAIID"><CODE>logRAIID()</CODE></A></STRONG><BR>
<DD>
Replaced by <A HREF="#item_logAlgInvocationId"><CODE>logAlgInvocationId</CODE></A>
</DL>

</BODY>

</HTML>
